#Docker comandos básicos

docker ps 	#lista contenedores activos
docker ps -a 	#lista todos los contenedores


#Docker con Mysql

#Volumenes

docker volume create <volumeNameOrId>
docker volume ls    #lista los volumenes creados
docker volume rm <volumeNameOrId>
docker volume inspect <volumeNameOrId>
docker volume prune    #borrar todos los volúmenes que no estén siendo usados por contenedores

#Pulls
------------
docker pull mysql/mysql-server:5.6
docker pull mysql:5.7

#Runs
------------
docker run -d -p 33060:3306 --name mysql-db  -e MYSQL_ROOT_PASSWORD=secret --mount src=mysql-db-data,dst=/var/lib/mysql mysql   // descarga (si no existe ) la ultima version mysql y ejecuta la imagen 

docker run --name mysql-db-5.6 -e MYSQL_ROOT_PASSWORD=almaveloz --mount src=mysql-db-data-5.6,dst=/var/lib/mysql -d mysql/mysql-server:5.6 

docker run --name mysql-5.6 -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=almaveloz mysql:5.6  

docker run -p 33060:3306  --rm -dit -e MYSQL_ROOT_PASSWORD=almaveloz --mount src=mysql-data,dst=/var/lib/mysql --name mysql mysql:5.7

#Execs
----------------
docker exec -it <MySqlContainerNameOrId> mysql -uroot -p
docker exec -it <MySqlContainerNameOrId> mysql -p  #se conecta a la shell de mysql

docker exec -it <containerNameOrId> bash  #entra al shell de linux del contenedor 1
docker exec -it <containerNameOrId> sh     #entra al shell de linux del contenedor 2
docker exec -it <containerNameOrId> /bin/bash  #entra al shell de linux del contenedor 3
docker exec -it <containerNameOrId> /bin/sh  #entra al shell de linux del contenedor 3

#Images
--------------
docker rmi <imageNameOrId> #elimina una imagen 
docker images #show images


#Containers
------------
docker stop <containerNameOrId>   #detiene o baja una instancia
docker start <containerNameOrId>   #inicia una instancia
docker rm <containerNameOrId>      #elimina o desinstala una instancia
docker rm -f <containerNameOrId>   #fuerza eliminar el proceso 


#mysql command
------------
mysql --host=127.0.0.1 --port=33060 --user=root --password=almaveloz
mysql -h127.0.0.1 -P33060 -uroot -palmaveloz



#Otros
docker inspect <containerNameOrId> | grep '"IPAddress"' | head -n 1


docker inspect -f "{{ .NetworkSettings.IPAddress }}" <containerNameOrId>


##DOCKER HUB CUENTA
docker login && docker push gatoencerrado/cheers2019


#Pro tip
#You can push a new image to this repository using the CLI

docker tag local-image:tagname new-repo:tagname
docker push new-repo:tagname

#Make sure to change tagname with your desired image repository tag.
docker push gatoencerrado/repo:tagname

##Mios

docker build -t gatoencerrado/tutorial-image .
docker run --name tutorial-container -p 80:8080 -d gatoencerrado/tutorial-image 
docker run --name api-node-container -p 80:8080 --link mysql-container:mysqldns -d api-node-image 

